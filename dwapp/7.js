(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{464:function(e,t,n){"use strict";n.r(t);var r=monaco.Promise,o=function(){function e(e){var t=this;this._defaults=e,this._worker=null,this._idleCheckInterval=setInterval(function(){return t._checkIfIdle()},3e4),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(function(){return t._stopWorker()})}return e.prototype._stopWorker=function(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null},e.prototype.dispose=function(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()},e.prototype._checkIfIdle=function(){this._worker&&(Date.now()-this._lastUsedTime>12e4&&this._stopWorker())},e.prototype._getClient=function(){return this._lastUsedTime=Date.now(),this._client||(this._worker=monaco.editor.createWebWorker({moduleId:"vs/language/json/jsonWorker",label:this._defaults.languageId,createData:{languageSettings:this._defaults.diagnosticsOptions,languageId:this._defaults.languageId}}),this._client=this._worker.getProxy()),this._client},e.prototype.getLanguageServiceWorker=function(){for(var e,t,n,o,i,a=this,s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return t=this._getClient().then(function(t){e=t}).then(function(e){return a._worker.withSyncedResources(s)}).then(function(t){return e}),i=new r(function(e,t){n=e,o=t},function(){}),t.then(n,o),i},e}();var i=n(504),a=monaco.Uri,s=monaco.Range,u=function(){function e(e,t,n){var r=this;this._languageId=e,this._worker=t,this._disposables=[],this._listener=Object.create(null);var o=function(e){var t,n=e.getModeId();n===r._languageId&&(r._listener[e.uri.toString()]=e.onDidChangeContent(function(){clearTimeout(t),t=setTimeout(function(){return r._doValidate(e.uri,n)},500)}),r._doValidate(e.uri,n))},i=function(e){monaco.editor.setModelMarkers(e,r._languageId,[]);var t=e.uri.toString(),n=r._listener[t];n&&(n.dispose(),delete r._listener[t])};this._disposables.push(monaco.editor.onDidCreateModel(o)),this._disposables.push(monaco.editor.onWillDisposeModel(function(e){i(e),r._resetSchema(e.uri)})),this._disposables.push(monaco.editor.onDidChangeModelLanguage(function(e){i(e.model),o(e.model),r._resetSchema(e.model.uri)})),this._disposables.push(n.onDidChange(function(e){monaco.editor.getModels().forEach(function(e){e.getModeId()===r._languageId&&(i(e),o(e))})})),this._disposables.push({dispose:function(){for(var e in monaco.editor.getModels().forEach(i),r._listener)r._listener[e].dispose()}}),monaco.editor.getModels().forEach(o)}return e.prototype.dispose=function(){this._disposables.forEach(function(e){return e&&e.dispose()}),this._disposables=[]},e.prototype._resetSchema=function(e){this._worker().then(function(t){t.resetSchema(e.toString())})},e.prototype._doValidate=function(e,t){this._worker(e).then(function(n){return n.doValidation(e.toString()).then(function(n){var r=n.map(function(e){return n="number"==typeof(t=e).code?String(t.code):t.code,{severity:function(e){switch(e){case i.c.Error:return monaco.MarkerSeverity.Error;case i.c.Warning:return monaco.MarkerSeverity.Warning;case i.c.Information:return monaco.MarkerSeverity.Info;case i.c.Hint:return monaco.MarkerSeverity.Hint;default:return monaco.MarkerSeverity.Info}}(t.severity),startLineNumber:t.range.start.line+1,startColumn:t.range.start.character+1,endLineNumber:t.range.end.line+1,endColumn:t.range.end.character+1,message:t.message,code:n,source:t.source};var t,n}),o=monaco.editor.getModel(e);o.getModeId()===t&&monaco.editor.setModelMarkers(o,t,r)})}).then(void 0,function(e){console.error(e)})},e}();function c(e){if(e)return{character:e.column-1,line:e.lineNumber-1}}function l(e){if(e)return{start:{line:e.startLineNumber-1,character:e.startColumn-1},end:{line:e.endLineNumber-1,character:e.endColumn-1}}}function d(e){if(e)return new s(e.start.line+1,e.start.character+1,e.end.line+1,e.end.character+1)}function h(e){var t=monaco.languages.CompletionItemKind;switch(e){case i.b.Text:return t.Text;case i.b.Method:return t.Method;case i.b.Function:return t.Function;case i.b.Constructor:return t.Constructor;case i.b.Field:return t.Field;case i.b.Variable:return t.Variable;case i.b.Class:return t.Class;case i.b.Interface:return t.Interface;case i.b.Module:return t.Module;case i.b.Property:return t.Property;case i.b.Unit:return t.Unit;case i.b.Value:return t.Value;case i.b.Enum:return t.Enum;case i.b.Keyword:return t.Keyword;case i.b.Snippet:return t.Snippet;case i.b.Color:return t.Color;case i.b.File:return t.File;case i.b.Reference:return t.Reference}return t.Property}function f(e){if(e)return{range:d(e.range),text:e.newText}}var g=function(){function e(e){this._worker=e}return Object.defineProperty(e.prototype,"triggerCharacters",{get:function(){return[" ",":"]},enumerable:!0,configurable:!0}),e.prototype.provideCompletionItems=function(e,t,n){e.getWordUntilPosition(t);var r=e.uri;return y(n,this._worker(r).then(function(e){return e.doComplete(r.toString(),c(t))}).then(function(e){if(e){var t=e.items.map(function(e){var t={label:e.label,insertText:e.insertText,sortText:e.sortText,filterText:e.filterText,documentation:e.documentation,detail:e.detail,kind:h(e.kind)};return e.textEdit&&(t.range=d(e.textEdit.range),t.insertText=e.textEdit.newText),e.insertTextFormat===i.d.Snippet&&(t.insertText={value:t.insertText}),t});return{isIncomplete:e.isIncomplete,items:t}}}))},e}();function p(e){return"string"==typeof e?{value:e}:(t=e)&&"object"==typeof t&&"string"==typeof t.kind?"plaintext"===e.kind?{value:e.value.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}:{value:e.value}:{value:"```"+e.language+"\n"+e.value+"\n```\n"};var t}var m=function(){function e(e){this._worker=e}return e.prototype.provideHover=function(e,t,n){var r=e.uri;return y(n,this._worker(r).then(function(e){return e.doHover(r.toString(),c(t))}).then(function(e){if(e)return{range:d(e.range),contents:function(e){if(e)return Array.isArray(e)?e.map(p):[p(e)]}(e.contents)}}))},e}();var v=function(){function e(e){this._worker=e}return e.prototype.provideDocumentSymbols=function(e,t){var n=e.uri;return y(t,this._worker(n).then(function(e){return e.findDocumentSymbols(n.toString())}).then(function(e){if(e)return e.map(function(e){return{name:e.name,containerName:e.containerName,kind:function(e){var t=monaco.languages.SymbolKind;switch(e){case i.h.File:return t.Array;case i.h.Module:return t.Module;case i.h.Namespace:return t.Namespace;case i.h.Package:return t.Package;case i.h.Class:return t.Class;case i.h.Method:return t.Method;case i.h.Property:return t.Property;case i.h.Field:return t.Field;case i.h.Constructor:return t.Constructor;case i.h.Enum:return t.Enum;case i.h.Interface:return t.Interface;case i.h.Function:return t.Function;case i.h.Variable:return t.Variable;case i.h.Constant:return t.Constant;case i.h.String:return t.String;case i.h.Number:return t.Number;case i.h.Boolean:return t.Boolean;case i.h.Array:return t.Array}return t.Function}(e.kind),location:(t=e.location,{uri:a.parse(t.uri),range:d(t.range)})};var t})}))},e}();function _(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces}}var k=function(){function e(e){this._worker=e}return e.prototype.provideDocumentFormattingEdits=function(e,t,n){var r=e.uri;return y(n,this._worker(r).then(function(e){return e.format(r.toString(),null,_(t)).then(function(e){if(e&&0!==e.length)return e.map(f)})}))},e}(),b=function(){function e(e){this._worker=e}return e.prototype.provideDocumentRangeFormattingEdits=function(e,t,n,r){var o=e.uri;return y(r,this._worker(o).then(function(e){return e.format(o.toString(),l(t),_(n)).then(function(e){if(e&&0!==e.length)return e.map(f)})}))},e}(),w=function(){function e(e){this._worker=e}return e.prototype.provideDocumentColors=function(e,t){var n=e.uri;return y(t,this._worker(n).then(function(e){return e.findDocumentColors(n.toString())}).then(function(e){if(e)return e.map(function(e){return{color:e.color,range:d(e.range)}})}))},e.prototype.provideColorPresentations=function(e,t,n){var r=e.uri;return y(n,this._worker(r).then(function(e){return e.getColorPresentations(r.toString(),t.color,l(t.range))}).then(function(e){if(e)return e.map(function(e){var t={label:e.label};return e.textEdit&&(t.textEdit=f(e.textEdit)),e.additionalTextEdits&&(t.additionalTextEdits=e.additionalTextEdits.map(f)),t})}))},e}();function y(e,t){return t.cancel&&e.onCancellationRequested(function(){return t.cancel()}),t}var C=n(506);function S(e){return{getInitialState:function(){return new L(null,null,!1)},tokenize:function(t,n,r,o){return function(e,t,n,r,o){void 0===r&&(r=0);var i=0,a=!1;switch(n.scanError){case 2:t='"'+t,i=1;break;case 1:t="/*"+t,i=2}var s,u,c=C.a(t),l=n.lastWasColon;u={tokens:[],endState:n.clone()};for(;;){var d=r+c.getPosition(),h="";if(17===(s=c.scan()))break;if(d===r+c.getPosition())throw new Error("Scanner did not advance, next 3 characters are: "+t.substr(c.getPosition(),3));switch(a&&(d-=i),a=i>0,s){case 1:case 2:h=I,l=!1;break;case 3:case 4:h=E,l=!1;break;case 6:h=x,l=!0;break;case 5:h=M,l=!1;break;case 8:case 9:h=P,l=!1;break;case 7:h=T,l=!1;break;case 10:h=l?D:F,l=!1;break;case 11:h=W,l=!1}if(e)switch(s){case 12:h=N;break;case 13:h=j}u.endState=new L(n.getStateData(),c.getTokenError(),l),u.tokens.push({startIndex:d,scopes:h})}return u}(e,t,n,r)}}}var I="delimiter.bracket.json",E="delimiter.array.json",x="delimiter.colon.json",M="delimiter.comma.json",P="keyword.json",T="keyword.json",D="string.value.json",W="number.json",F="string.key.json",j="comment.block.json",N="comment.line.json",L=function(){function e(e,t,n){this._state=e,this.scanError=t,this.lastWasColon=n}return e.prototype.clone=function(){return new e(this._state,this.scanError,this.lastWasColon)},e.prototype.equals=function(t){return t===this||!!(t&&t instanceof e)&&(this.scanError===t.scanError&&this.lastWasColon===t.lastWasColon)},e.prototype.getStateData=function(){return this._state},e.prototype.setStateData=function(e){this._state=e},e}();function V(e){var t=[],n=new o(e);t.push(n);var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.getLanguageServiceWorker.apply(n,e)},i=e.languageId;t.push(monaco.languages.registerCompletionItemProvider(i,new g(r))),t.push(monaco.languages.registerHoverProvider(i,new m(r))),t.push(monaco.languages.registerDocumentSymbolProvider(i,new v(r))),t.push(monaco.languages.registerDocumentFormattingEditProvider(i,new k(r))),t.push(monaco.languages.registerDocumentRangeFormattingEditProvider(i,new b(r))),t.push(new u(i,r,e)),t.push(monaco.languages.setTokensProvider(i,S(!0))),t.push(monaco.languages.setLanguageConfiguration(i,R)),t.push(monaco.languages.registerColorProvider(i,new w(r)))}n.d(t,"setupMode",function(){return V});var R={wordPattern:/(-?\d*\.\d\w*)|([^\[\{\]\}\:\"\,\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"]],autoClosingPairs:[{open:"{",close:"}",notIn:["string"]},{open:"[",close:"]",notIn:["string"]},{open:'"',close:'"',notIn:["string"]}]}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbW9uYWNvLWVkaXRvci9lc20vdnMvbGFuZ3VhZ2UvanNvbi93b3JrZXJNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb25hY28tZWRpdG9yL2VzbS92cy9sYW5ndWFnZS9qc29uL2xhbmd1YWdlRmVhdHVyZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21vbmFjby1lZGl0b3IvZXNtL3ZzL2xhbmd1YWdlL2pzb24vdG9rZW5pemF0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb25hY28tZWRpdG9yL2VzbS92cy9sYW5ndWFnZS9qc29uL2pzb25Nb2RlLmpzIl0sIm5hbWVzIjpbIlByb21pc2UiLCJtb25hY28iLCJXb3JrZXJNYW5hZ2VyIiwiZGVmYXVsdHMiLCJfdGhpcyIsInRoaXMiLCJfZGVmYXVsdHMiLCJfd29ya2VyIiwiX2lkbGVDaGVja0ludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJfY2hlY2tJZklkbGUiLCJfbGFzdFVzZWRUaW1lIiwiX2NvbmZpZ0NoYW5nZUxpc3RlbmVyIiwib25EaWRDaGFuZ2UiLCJfc3RvcFdvcmtlciIsInByb3RvdHlwZSIsImRpc3Bvc2UiLCJfY2xpZW50IiwiY2xlYXJJbnRlcnZhbCIsIkRhdGUiLCJub3ciLCJfZ2V0Q2xpZW50IiwiZWRpdG9yIiwiY3JlYXRlV2ViV29ya2VyIiwibW9kdWxlSWQiLCJsYWJlbCIsImxhbmd1YWdlSWQiLCJjcmVhdGVEYXRhIiwibGFuZ3VhZ2VTZXR0aW5ncyIsImRpYWdub3N0aWNzT3B0aW9ucyIsImdldFByb3h5IiwiZ2V0TGFuZ3VhZ2VTZXJ2aWNlV29ya2VyIiwicCIsImNvbXBsZXRlQ2FsbGJhY2siLCJlcnJvckNhbGxiYWNrIiwiciIsInJlc291cmNlcyIsIl9pIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidGhlbiIsImNsaWVudCIsIl8iLCJ3aXRoU3luY2VkUmVzb3VyY2VzIiwiYyIsImUiLCJVcmkiLCJSYW5nZSIsIkRpYWdub3N0aWNzQWRhcHRlciIsIl9sYW5ndWFnZUlkIiwiX2Rpc3Bvc2FibGVzIiwiX2xpc3RlbmVyIiwiT2JqZWN0IiwiY3JlYXRlIiwib25Nb2RlbEFkZCIsIm1vZGVsIiwiaGFuZGxlIiwibW9kZUlkIiwiZ2V0TW9kZUlkIiwidXJpIiwidG9TdHJpbmciLCJvbkRpZENoYW5nZUNvbnRlbnQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiX2RvVmFsaWRhdGUiLCJvbk1vZGVsUmVtb3ZlZCIsInNldE1vZGVsTWFya2VycyIsInVyaVN0ciIsImxpc3RlbmVyIiwicHVzaCIsIm9uRGlkQ3JlYXRlTW9kZWwiLCJvbldpbGxEaXNwb3NlTW9kZWwiLCJfcmVzZXRTY2hlbWEiLCJvbkRpZENoYW5nZU1vZGVsTGFuZ3VhZ2UiLCJldmVudCIsImdldE1vZGVscyIsImZvckVhY2giLCJrZXkiLCJkIiwicmVzb3VyY2UiLCJ3b3JrZXIiLCJyZXNldFNjaGVtYSIsImRvVmFsaWRhdGlvbiIsImRpYWdub3N0aWNzIiwibWFya2VycyIsIm1hcCIsImNvZGUiLCJkaWFnIiwiU3RyaW5nIiwic2V2ZXJpdHkiLCJsc1NldmVyaXR5IiwibWFpbiIsIkVycm9yIiwiTWFya2VyU2V2ZXJpdHkiLCJXYXJuaW5nIiwiSW5mb3JtYXRpb24iLCJJbmZvIiwiSGludCIsInRvU2V2ZXJpdHkiLCJzdGFydExpbmVOdW1iZXIiLCJyYW5nZSIsInN0YXJ0IiwibGluZSIsInN0YXJ0Q29sdW1uIiwiY2hhcmFjdGVyIiwiZW5kTGluZU51bWJlciIsImVuZCIsImVuZENvbHVtbiIsIm1lc3NhZ2UiLCJzb3VyY2UiLCJnZXRNb2RlbCIsInVuZGVmaW5lZCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImZyb21Qb3NpdGlvbiIsInBvc2l0aW9uIiwiY29sdW1uIiwibGluZU51bWJlciIsImZyb21SYW5nZSIsInRvUmFuZ2UiLCJ0b0NvbXBsZXRpb25JdGVtS2luZCIsImtpbmQiLCJtSXRlbUtpbmQiLCJsYW5ndWFnZXMiLCJDb21wbGV0aW9uSXRlbUtpbmQiLCJUZXh0IiwiTWV0aG9kIiwiRnVuY3Rpb24iLCJDb25zdHJ1Y3RvciIsIkZpZWxkIiwiVmFyaWFibGUiLCJDbGFzcyIsIkludGVyZmFjZSIsIk1vZHVsZSIsIlByb3BlcnR5IiwiVW5pdCIsIlZhbHVlIiwiRW51bSIsIktleXdvcmQiLCJTbmlwcGV0IiwiQ29sb3IiLCJGaWxlIiwiUmVmZXJlbmNlIiwidG9UZXh0RWRpdCIsInRleHRFZGl0IiwidGV4dCIsIm5ld1RleHQiLCJsYW5ndWFnZUZlYXR1cmVzX0NvbXBsZXRpb25BZGFwdGVyIiwiQ29tcGxldGlvbkFkYXB0ZXIiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJwcm92aWRlQ29tcGxldGlvbkl0ZW1zIiwidG9rZW4iLCJnZXRXb3JkVW50aWxQb3NpdGlvbiIsIndpcmVDYW5jZWxsYXRpb25Ub2tlbiIsImRvQ29tcGxldGUiLCJpbmZvIiwiaXRlbXMiLCJlbnRyeSIsIml0ZW0iLCJpbnNlcnRUZXh0Iiwic29ydFRleHQiLCJmaWx0ZXJUZXh0IiwiZG9jdW1lbnRhdGlvbiIsImRldGFpbCIsImluc2VydFRleHRGb3JtYXQiLCJ2YWx1ZSIsImlzSW5jb21wbGV0ZSIsInRvTWFya2Rvd25TdHJpbmciLCJ0aGluZyIsInJlcGxhY2UiLCJsYW5ndWFnZSIsIkhvdmVyQWRhcHRlciIsInByb3ZpZGVIb3ZlciIsImRvSG92ZXIiLCJjb250ZW50cyIsIkFycmF5IiwiaXNBcnJheSIsInRvTWFya2VkU3RyaW5nQXJyYXkiLCJEb2N1bWVudFN5bWJvbEFkYXB0ZXIiLCJwcm92aWRlRG9jdW1lbnRTeW1ib2xzIiwiZmluZERvY3VtZW50U3ltYm9scyIsIm5hbWUiLCJjb250YWluZXJOYW1lIiwibUtpbmQiLCJTeW1ib2xLaW5kIiwiTmFtZXNwYWNlIiwiUGFja2FnZSIsIkNvbnN0YW50IiwiTnVtYmVyIiwiQm9vbGVhbiIsInRvU3ltYm9sS2luZCIsImxvY2F0aW9uIiwicGFyc2UiLCJmcm9tRm9ybWF0dGluZ09wdGlvbnMiLCJvcHRpb25zIiwidGFiU2l6ZSIsImluc2VydFNwYWNlcyIsIkRvY3VtZW50Rm9ybWF0dGluZ0VkaXRQcm92aWRlciIsInByb3ZpZGVEb2N1bWVudEZvcm1hdHRpbmdFZGl0cyIsImZvcm1hdCIsImVkaXRzIiwiRG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdFZGl0UHJvdmlkZXIiLCJwcm92aWRlRG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdFZGl0cyIsIkRvY3VtZW50Q29sb3JBZGFwdGVyIiwicHJvdmlkZURvY3VtZW50Q29sb3JzIiwiZmluZERvY3VtZW50Q29sb3JzIiwiaW5mb3MiLCJjb2xvciIsInByb3ZpZGVDb2xvclByZXNlbnRhdGlvbnMiLCJnZXRDb2xvclByZXNlbnRhdGlvbnMiLCJwcmVzZW50YXRpb25zIiwicHJlc2VudGF0aW9uIiwiYWRkaXRpb25hbFRleHRFZGl0cyIsInByb21pc2UiLCJjYW5jZWwiLCJvbkNhbmNlbGxhdGlvblJlcXVlc3RlZCIsImNyZWF0ZVRva2VuaXphdGlvblN1cHBvcnQiLCJzdXBwb3J0Q29tbWVudHMiLCJnZXRJbml0aWFsU3RhdGUiLCJKU09OU3RhdGUiLCJ0b2tlbml6ZSIsInN0YXRlIiwib2Zmc2V0RGVsdGEiLCJzdG9wQXRPZmZzZXQiLCJjb21tZW50cyIsIm51bWJlck9mSW5zZXJ0ZWRDaGFyYWN0ZXJzIiwiYWRqdXN0T2Zmc2V0Iiwic2NhbkVycm9yIiwicmV0Iiwic2Nhbm5lciIsImpzb25jX3BhcnNlcl9tYWluIiwibGFzdFdhc0NvbG9uIiwidG9rZW5zIiwiZW5kU3RhdGUiLCJjbG9uZSIsIm9mZnNldCIsImdldFBvc2l0aW9uIiwidHlwZSIsInNjYW4iLCJzdWJzdHIiLCJUT0tFTl9ERUxJTV9PQkpFQ1QiLCJUT0tFTl9ERUxJTV9BUlJBWSIsIlRPS0VOX0RFTElNX0NPTE9OIiwiVE9LRU5fREVMSU1fQ09NTUEiLCJUT0tFTl9WQUxVRV9CT09MRUFOIiwiVE9LRU5fVkFMVUVfTlVMTCIsIlRPS0VOX1ZBTFVFX1NUUklORyIsIlRPS0VOX1BST1BFUlRZX05BTUUiLCJUT0tFTl9WQUxVRV9OVU1CRVIiLCJUT0tFTl9DT01NRU5UX0xJTkUiLCJUT0tFTl9DT01NRU5UX0JMT0NLIiwiZ2V0U3RhdGVEYXRhIiwiZ2V0VG9rZW5FcnJvciIsInN0YXJ0SW5kZXgiLCJzY29wZXMiLCJfc3RhdGUiLCJlcXVhbHMiLCJvdGhlciIsInNldFN0YXRlRGF0YSIsInNldHVwTW9kZSIsImRpc3Bvc2FibGVzIiwidXJpcyIsImFwcGx5IiwicmVnaXN0ZXJDb21wbGV0aW9uSXRlbVByb3ZpZGVyIiwicmVnaXN0ZXJIb3ZlclByb3ZpZGVyIiwicmVnaXN0ZXJEb2N1bWVudFN5bWJvbFByb3ZpZGVyIiwicmVnaXN0ZXJEb2N1bWVudEZvcm1hdHRpbmdFZGl0UHJvdmlkZXIiLCJyZWdpc3RlckRvY3VtZW50UmFuZ2VGb3JtYXR0aW5nRWRpdFByb3ZpZGVyIiwic2V0VG9rZW5zUHJvdmlkZXIiLCJzZXRMYW5ndWFnZUNvbmZpZ3VyYXRpb24iLCJyaWNoRWRpdENvbmZpZ3VyYXRpb24iLCJyZWdpc3RlckNvbG9yUHJvdmlkZXIiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIndvcmRQYXR0ZXJuIiwibGluZUNvbW1lbnQiLCJibG9ja0NvbW1lbnQiLCJicmFja2V0cyIsImF1dG9DbG9zaW5nUGFpcnMiLCJvcGVuIiwiY2xvc2UiLCJub3RJbiJdLCJtYXBwaW5ncyI6ImlHQUtBLElBQUFBLEVBQUFDLE9BQUFELFFBRUFFLEVBQUEsV0FDQSxTQUFBQSxFQUFBQyxHQUNBLElBQUFDLEVBQUFDLEtBQ0FBLEtBQUFDLFVBQUFILEVBQ0FFLEtBQUFFLFFBQUEsS0FDQUYsS0FBQUcsbUJBQUFDLFlBQUEsV0FBMkQsT0FBQUwsRUFBQU0sZ0JBQStCLEtBQzFGTCxLQUFBTSxjQUFBLEVBQ0FOLEtBQUFPLHNCQUFBUCxLQUFBQyxVQUFBTyxZQUFBLFdBQTZFLE9BQUFULEVB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LEtBQUFwRSxPQUFBMkgsVUFBQXFKLHlCQUFBdlAsRUFBQXdQLElBQ0FWLEVBQUFuTSxLQUFBcEUsT0FBQTJILFVBQUF1SixzQkFBQXpQLEVBQUEsSUFBQXFMLEVBQUEvSCxLQTVCQW9NLEVBQUF0TSxFQUFBdU0sRUFBQSw4QkFBQWQsSUE4QkEsSUFBQVcsR0FDQUksWUFBQSx5Q0FDQWxELFVBQ0FtRCxZQUFBLEtBQ0FDLGNBQUEsWUFFQUMsV0FDQSxJQUFXLE1BQ1gsVUFFQUMsbUJBQ1NDLEtBQUEsSUFBU0MsTUFBQSxJQUFZQyxPQUFBLFlBQ3JCRixLQUFBLElBQUFDLE1BQUEsSUFBQUMsT0FBQSxZQUNBRixLQUFBLElBQUFDLE1BQUEsSUFBQUMsT0FBQSIsImZpbGUiOiI3LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4ndXNlIHN0cmljdCc7XG52YXIgUHJvbWlzZSA9IG1vbmFjby5Qcm9taXNlO1xudmFyIFNUT1BfV0hFTl9JRExFX0ZPUiA9IDIgKiA2MCAqIDEwMDA7IC8vIDJtaW5cbnZhciBXb3JrZXJNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFdvcmtlck1hbmFnZXIoZGVmYXVsdHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5fZGVmYXVsdHMgPSBkZWZhdWx0cztcbiAgICAgICAgdGhpcy5fd29ya2VyID0gbnVsbDtcbiAgICAgICAgdGhpcy5faWRsZUNoZWNrSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fY2hlY2tJZklkbGUoKTsgfSwgMzAgKiAxMDAwKTtcbiAgICAgICAgdGhpcy5fbGFzdFVzZWRUaW1lID0gMDtcbiAgICAgICAgdGhpcy5fY29uZmlnQ2hhbmdlTGlzdGVuZXIgPSB0aGlzLl9kZWZhdWx0cy5vbkRpZENoYW5nZShmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fc3RvcFdvcmtlcigpOyB9KTtcbiAgICB9XG4gICAgV29ya2VyTWFuYWdlci5wcm90b3R5cGUuX3N0b3BXb3JrZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl93b3JrZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3dvcmtlci5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLl93b3JrZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NsaWVudCA9IG51bGw7XG4gICAgfTtcbiAgICBXb3JrZXJNYW5hZ2VyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2lkbGVDaGVja0ludGVydmFsKTtcbiAgICAgICAgdGhpcy5fY29uZmlnQ2hhbmdlTGlzdGVuZXIuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLl9zdG9wV29ya2VyKCk7XG4gICAgfTtcbiAgICBXb3JrZXJNYW5hZ2VyLnByb3RvdHlwZS5fY2hlY2tJZklkbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5fd29ya2VyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbWVQYXNzZWRTaW5jZUxhc3RVc2VkID0gRGF0ZS5ub3coKSAtIHRoaXMuX2xhc3RVc2VkVGltZTtcbiAgICAgICAgaWYgKHRpbWVQYXNzZWRTaW5jZUxhc3RVc2VkID4gU1RPUF9XSEVOX0lETEVfRk9SKSB7XG4gICAgICAgICAgICB0aGlzLl9zdG9wV29ya2VyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFdvcmtlck1hbmFnZXIucHJvdG90eXBlLl9nZXRDbGllbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2xhc3RVc2VkVGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGlmICghdGhpcy5fY2xpZW50KSB7XG4gICAgICAgICAgICB0aGlzLl93b3JrZXIgPSBtb25hY28uZWRpdG9yLmNyZWF0ZVdlYldvcmtlcih7XG4gICAgICAgICAgICAgICAgLy8gbW9kdWxlIHRoYXQgZXhwb3J0cyB0aGUgY3JlYXRlKCkgbWV0aG9kIGFuZCByZXR1cm5zIGEgYEpTT05Xb3JrZXJgIGluc3RhbmNlXG4gICAgICAgICAgICAgICAgbW9kdWxlSWQ6ICd2cy9sYW5ndWFnZS9qc29uL2pzb25Xb3JrZXInLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLl9kZWZhdWx0cy5sYW5ndWFnZUlkLFxuICAgICAgICAgICAgICAgIC8vIHBhc3NlZCBpbiB0byB0aGUgY3JlYXRlKCkgbWV0aG9kXG4gICAgICAgICAgICAgICAgY3JlYXRlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZVNldHRpbmdzOiB0aGlzLl9kZWZhdWx0cy5kaWFnbm9zdGljc09wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlSWQ6IHRoaXMuX2RlZmF1bHRzLmxhbmd1YWdlSWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX2NsaWVudCA9IHRoaXMuX3dvcmtlci5nZXRQcm94eSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGllbnQ7XG4gICAgfTtcbiAgICBXb3JrZXJNYW5hZ2VyLnByb3RvdHlwZS5nZXRMYW5ndWFnZVNlcnZpY2VXb3JrZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciByZXNvdXJjZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHJlc291cmNlc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfY2xpZW50O1xuICAgICAgICByZXR1cm4gdG9TaGFsbG93Q2FuY2VsUHJvbWlzZSh0aGlzLl9nZXRDbGllbnQoKS50aGVuKGZ1bmN0aW9uIChjbGllbnQpIHtcbiAgICAgICAgICAgIF9jbGllbnQgPSBjbGllbnQ7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF8pIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5fd29ya2VyLndpdGhTeW5jZWRSZXNvdXJjZXMocmVzb3VyY2VzKTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoXykgeyByZXR1cm4gX2NsaWVudDsgfSkpO1xuICAgIH07XG4gICAgcmV0dXJuIFdvcmtlck1hbmFnZXI7XG59KCkpO1xuZXhwb3J0IHsgV29ya2VyTWFuYWdlciB9O1xuZnVuY3Rpb24gdG9TaGFsbG93Q2FuY2VsUHJvbWlzZShwKSB7XG4gICAgdmFyIGNvbXBsZXRlQ2FsbGJhY2s7XG4gICAgdmFyIGVycm9yQ2FsbGJhY2s7XG4gICAgdmFyIHIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYywgZSkge1xuICAgICAgICBjb21wbGV0ZUNhbGxiYWNrID0gYztcbiAgICAgICAgZXJyb3JDYWxsYmFjayA9IGU7XG4gICAgfSwgZnVuY3Rpb24gKCkgeyB9KTtcbiAgICBwLnRoZW4oY29tcGxldGVDYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgcmV0dXJuIHI7XG59XG4iLCIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbid1c2Ugc3RyaWN0JztcbmltcG9ydCAqIGFzIGxzIGZyb20gJy4vX2RlcHMvdnNjb2RlLWxhbmd1YWdlc2VydmVyLXR5cGVzL21haW4uanMnO1xudmFyIFVyaSA9IG1vbmFjby5Vcmk7XG52YXIgUmFuZ2UgPSBtb25hY28uUmFuZ2U7XG4vLyAtLS0gZGlhZ25vc3RpY3MgLS0tIC0tLVxudmFyIERpYWdub3N0aWNzQWRhcHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEaWFnbm9zdGljc0FkYXB0ZXIoX2xhbmd1YWdlSWQsIF93b3JrZXIsIGRlZmF1bHRzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX2xhbmd1YWdlSWQgPSBfbGFuZ3VhZ2VJZDtcbiAgICAgICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcbiAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXIgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB2YXIgb25Nb2RlbEFkZCA9IGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICAgICAgdmFyIG1vZGVJZCA9IG1vZGVsLmdldE1vZGVJZCgpO1xuICAgICAgICAgICAgaWYgKG1vZGVJZCAhPT0gX3RoaXMuX2xhbmd1YWdlSWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaGFuZGxlO1xuICAgICAgICAgICAgX3RoaXMuX2xpc3RlbmVyW21vZGVsLnVyaS50b1N0cmluZygpXSA9IG1vZGVsLm9uRGlkQ2hhbmdlQ29udGVudChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgaGFuZGxlID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fZG9WYWxpZGF0ZShtb2RlbC51cmksIG1vZGVJZCk7IH0sIDUwMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF90aGlzLl9kb1ZhbGlkYXRlKG1vZGVsLnVyaSwgbW9kZUlkKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9uTW9kZWxSZW1vdmVkID0gZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgICAgICAgICBtb25hY28uZWRpdG9yLnNldE1vZGVsTWFya2Vycyhtb2RlbCwgX3RoaXMuX2xhbmd1YWdlSWQsIFtdKTtcbiAgICAgICAgICAgIHZhciB1cmlTdHIgPSBtb2RlbC51cmkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHZhciBsaXN0ZW5lciA9IF90aGlzLl9saXN0ZW5lclt1cmlTdHJdO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fbGlzdGVuZXJbdXJpU3RyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChtb25hY28uZWRpdG9yLm9uRGlkQ3JlYXRlTW9kZWwob25Nb2RlbEFkZCkpO1xuICAgICAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKG1vbmFjby5lZGl0b3Iub25XaWxsRGlzcG9zZU1vZGVsKGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICAgICAgb25Nb2RlbFJlbW92ZWQobW9kZWwpO1xuICAgICAgICAgICAgX3RoaXMuX3Jlc2V0U2NoZW1hKG1vZGVsLnVyaSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChtb25hY28uZWRpdG9yLm9uRGlkQ2hhbmdlTW9kZWxMYW5ndWFnZShmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIG9uTW9kZWxSZW1vdmVkKGV2ZW50Lm1vZGVsKTtcbiAgICAgICAgICAgIG9uTW9kZWxBZGQoZXZlbnQubW9kZWwpO1xuICAgICAgICAgICAgX3RoaXMuX3Jlc2V0U2NoZW1hKGV2ZW50Lm1vZGVsLnVyaSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChkZWZhdWx0cy5vbkRpZENoYW5nZShmdW5jdGlvbiAoXykge1xuICAgICAgICAgICAgbW9uYWNvLmVkaXRvci5nZXRNb2RlbHMoKS5mb3JFYWNoKGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgICAgICAgICAgIGlmIChtb2RlbC5nZXRNb2RlSWQoKSA9PT0gX3RoaXMuX2xhbmd1YWdlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgb25Nb2RlbFJlbW92ZWQobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICBvbk1vZGVsQWRkKG1vZGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKHtcbiAgICAgICAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBtb25hY28uZWRpdG9yLmdldE1vZGVscygpLmZvckVhY2gob25Nb2RlbFJlbW92ZWQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBfdGhpcy5fbGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2xpc3RlbmVyW2tleV0uZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG1vbmFjby5lZGl0b3IuZ2V0TW9kZWxzKCkuZm9yRWFjaChvbk1vZGVsQWRkKTtcbiAgICB9XG4gICAgRGlhZ25vc3RpY3NBZGFwdGVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9kaXNwb3NhYmxlcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkICYmIGQuZGlzcG9zZSgpOyB9KTtcbiAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXMgPSBbXTtcbiAgICB9O1xuICAgIERpYWdub3N0aWNzQWRhcHRlci5wcm90b3R5cGUuX3Jlc2V0U2NoZW1hID0gZnVuY3Rpb24gKHJlc291cmNlKSB7XG4gICAgICAgIHRoaXMuX3dvcmtlcigpLnRoZW4oZnVuY3Rpb24gKHdvcmtlcikge1xuICAgICAgICAgICAgd29ya2VyLnJlc2V0U2NoZW1hKHJlc291cmNlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIERpYWdub3N0aWNzQWRhcHRlci5wcm90b3R5cGUuX2RvVmFsaWRhdGUgPSBmdW5jdGlvbiAocmVzb3VyY2UsIGxhbmd1YWdlSWQpIHtcbiAgICAgICAgdGhpcy5fd29ya2VyKHJlc291cmNlKS50aGVuKGZ1bmN0aW9uICh3b3JrZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB3b3JrZXIuZG9WYWxpZGF0aW9uKHJlc291cmNlLnRvU3RyaW5nKCkpLnRoZW4oZnVuY3Rpb24gKGRpYWdub3N0aWNzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlcnMgPSBkaWFnbm9zdGljcy5tYXAoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIHRvRGlhZ25vc3RpY3MocmVzb3VyY2UsIGQpOyB9KTtcbiAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSBtb25hY28uZWRpdG9yLmdldE1vZGVsKHJlc291cmNlKTtcbiAgICAgICAgICAgICAgICBpZiAobW9kZWwuZ2V0TW9kZUlkKCkgPT09IGxhbmd1YWdlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9uYWNvLmVkaXRvci5zZXRNb2RlbE1hcmtlcnMobW9kZWwsIGxhbmd1YWdlSWQsIG1hcmtlcnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KS50aGVuKHVuZGVmaW5lZCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBEaWFnbm9zdGljc0FkYXB0ZXI7XG59KCkpO1xuZXhwb3J0IHsgRGlhZ25vc3RpY3NBZGFwdGVyIH07XG5mdW5jdGlvbiB0b1NldmVyaXR5KGxzU2V2ZXJpdHkpIHtcbiAgICBzd2l0Y2ggKGxzU2V2ZXJpdHkpIHtcbiAgICAgICAgY2FzZSBscy5EaWFnbm9zdGljU2V2ZXJpdHkuRXJyb3I6IHJldHVybiBtb25hY28uTWFya2VyU2V2ZXJpdHkuRXJyb3I7XG4gICAgICAgIGNhc2UgbHMuRGlhZ25vc3RpY1NldmVyaXR5Lldhcm5pbmc6IHJldHVybiBtb25hY28uTWFya2VyU2V2ZXJpdHkuV2FybmluZztcbiAgICAgICAgY2FzZSBscy5EaWFnbm9zdGljU2V2ZXJpdHkuSW5mb3JtYXRpb246IHJldHVybiBtb25hY28uTWFya2VyU2V2ZXJpdHkuSW5mbztcbiAgICAgICAgY2FzZSBscy5EaWFnbm9zdGljU2V2ZXJpdHkuSGludDogcmV0dXJuIG1vbmFjby5NYXJrZXJTZXZlcml0eS5IaW50O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG1vbmFjby5NYXJrZXJTZXZlcml0eS5JbmZvO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRvRGlhZ25vc3RpY3MocmVzb3VyY2UsIGRpYWcpIHtcbiAgICB2YXIgY29kZSA9IHR5cGVvZiBkaWFnLmNvZGUgPT09ICdudW1iZXInID8gU3RyaW5nKGRpYWcuY29kZSkgOiBkaWFnLmNvZGU7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V2ZXJpdHk6IHRvU2V2ZXJpdHkoZGlhZy5zZXZlcml0eSksXG4gICAgICAgIHN0YXJ0TGluZU51bWJlcjogZGlhZy5yYW5nZS5zdGFydC5saW5lICsgMSxcbiAgICAgICAgc3RhcnRDb2x1bW46IGRpYWcucmFuZ2Uuc3RhcnQuY2hhcmFjdGVyICsgMSxcbiAgICAgICAgZW5kTGluZU51bWJlcjogZGlhZy5yYW5nZS5lbmQubGluZSArIDEsXG4gICAgICAgIGVuZENvbHVtbjogZGlhZy5yYW5nZS5lbmQuY2hhcmFjdGVyICsgMSxcbiAgICAgICAgbWVzc2FnZTogZGlhZy5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBjb2RlLFxuICAgICAgICBzb3VyY2U6IGRpYWcuc291cmNlXG4gICAgfTtcbn1cbi8vIC0tLSBjb21wbGV0aW9uIC0tLS0tLVxuZnVuY3Rpb24gZnJvbVBvc2l0aW9uKHBvc2l0aW9uKSB7XG4gICAgaWYgKCFwb3NpdGlvbikge1xuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICByZXR1cm4geyBjaGFyYWN0ZXI6IHBvc2l0aW9uLmNvbHVtbiAtIDEsIGxpbmU6IHBvc2l0aW9uLmxpbmVOdW1iZXIgLSAxIH07XG59XG5mdW5jdGlvbiBmcm9tUmFuZ2UocmFuZ2UpIHtcbiAgICBpZiAoIXJhbmdlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIHJldHVybiB7IHN0YXJ0OiB7IGxpbmU6IHJhbmdlLnN0YXJ0TGluZU51bWJlciAtIDEsIGNoYXJhY3RlcjogcmFuZ2Uuc3RhcnRDb2x1bW4gLSAxIH0sIGVuZDogeyBsaW5lOiByYW5nZS5lbmRMaW5lTnVtYmVyIC0gMSwgY2hhcmFjdGVyOiByYW5nZS5lbmRDb2x1bW4gLSAxIH0gfTtcbn1cbmZ1bmN0aW9uIHRvUmFuZ2UocmFuZ2UpIHtcbiAgICBpZiAoIXJhbmdlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmFuZ2UocmFuZ2Uuc3RhcnQubGluZSArIDEsIHJhbmdlLnN0YXJ0LmNoYXJhY3RlciArIDEsIHJhbmdlLmVuZC5saW5lICsgMSwgcmFuZ2UuZW5kLmNoYXJhY3RlciArIDEpO1xufVxuZnVuY3Rpb24gdG9Db21wbGV0aW9uSXRlbUtpbmQoa2luZCkge1xuICAgIHZhciBtSXRlbUtpbmQgPSBtb25hY28ubGFuZ3VhZ2VzLkNvbXBsZXRpb25JdGVtS2luZDtcbiAgICBzd2l0Y2ggKGtpbmQpIHtcbiAgICAgICAgY2FzZSBscy5Db21wbGV0aW9uSXRlbUtpbmQuVGV4dDogcmV0dXJuIG1JdGVtS2luZC5UZXh0O1xuICAgICAgICBjYXNlIGxzLkNvbXBsZXRpb25JdGVtS2luZC5NZXRob2Q6IHJldHVybiBtSXRlbUtpbmQuTWV0aG9kO1xuICAgICAgICBjYXNlIGxzLkNvbXBsZXRpb25JdGVtS2luZC5GdW5jdGlvbjogcmV0dXJuIG1JdGVtS2luZC5GdW5jdGlvbjtcbiAgICAgICAgY2FzZSBscy5Db21wbGV0aW9uSXRlbUtpbmQuQ29uc3RydWN0b3I6IHJldHVybiBtSXRlbUtpbmQuQ29uc3RydWN0b3I7XG4gICAgICAgIGNhc2UgbHMuQ29tcGxldGlvbkl0ZW1LaW5kLkZpZWxkOiByZXR1cm4gbUl0ZW1LaW5kLkZpZWxkO1xuICAgICAgICBjYXNlIGxzLkNvbXBsZXRpb25JdGVtS2luZC5WYXJpYWJsZTogcmV0dXJuIG1JdGVtS2luZC5WYXJpYWJsZTtcbiAgICAgICAgY2FzZSBscy5Db21wbGV0aW9uSXRlbUtpbmQuQ2xhc3M6IHJldHVybiBtSXRlbUtpbmQuQ2xhc3M7XG4gICAgICAgIGNhc2UgbHMuQ29tcGxldGlvbkl0ZW1LaW5kLkludGVyZmFjZTogcmV0dXJuIG1JdGVtS2luZC5JbnRlcmZhY2U7XG4gICAgICAgIGNhc2UgbHMuQ29tcGxldGlvbkl0ZW1LaW5kLk1vZHVsZTogcmV0dXJuIG1JdGVtS2luZC5Nb2R1bGU7XG4gICAgICAgIGNhc2UgbHMuQ29tcGxldGlvbkl0ZW1LaW5kLlByb3BlcnR5OiByZXR1cm4gbUl0ZW1LaW5kLlByb3BlcnR5O1xuICAgICAgICBjYXNlIGxzLkNvbXBsZXRpb25JdGVtS2luZC5Vbml0OiByZXR1cm4gbUl0ZW1LaW5kLlVuaXQ7XG4gICAgICAgIGNhc2UgbHMuQ29tcGxldGlvbkl0ZW1LaW5kLlZhbHVlOiByZXR1cm4gbUl0ZW1LaW5kLlZhbHVlO1xuICAgICAgICBjYXNlIGxzLkNvbXBsZXRpb25JdGVtS2luZC5FbnVtOiByZXR1cm4gbUl0ZW1LaW5kLkVudW07XG4gICAgICAgIGNhc2UgbHMuQ29tcGxldGlvbkl0ZW1LaW5kLktleXdvcmQ6IHJldHVybiBtSXRlbUtpbmQuS2V5d29yZDtcbiAgICAgICAgY2FzZSBscy5Db21wbGV0aW9uSXRlbUtpbmQuU25pcHBldDogcmV0dXJuIG1JdGVtS2luZC5TbmlwcGV0O1xuICAgICAgICBjYXNlIGxzLkNvbXBsZXRpb25JdGVtS2luZC5Db2xvcjogcmV0dXJuIG1JdGVtS2luZC5Db2xvcjtcbiAgICAgICAgY2FzZSBscy5Db21wbGV0aW9uSXRlbUtpbmQuRmlsZTogcmV0dXJuIG1JdGVtS2luZC5GaWxlO1xuICAgICAgICBjYXNlIGxzLkNvbXBsZXRpb25JdGVtS2luZC5SZWZlcmVuY2U6IHJldHVybiBtSXRlbUtpbmQuUmVmZXJlbmNlO1xuICAgIH1cbiAgICByZXR1cm4gbUl0ZW1LaW5kLlByb3BlcnR5O1xufVxuZnVuY3Rpb24gZnJvbUNvbXBsZXRpb25JdGVtS2luZChraW5kKSB7XG4gICAgdmFyIG1JdGVtS2luZCA9IG1vbmFjby5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1LaW5kO1xuICAgIHN3aXRjaCAoa2luZCkge1xuICAgICAgICBjYXNlIG1JdGVtS2luZC5UZXh0OiByZXR1cm4gbHMuQ29tcGxldGlvbkl0ZW1LaW5kLlRleHQ7XG4gICAgICAgIGNhc2UgbUl0ZW1LaW5kLk1ldGhvZDogcmV0dXJuIGxzLkNvbXBsZXRpb25JdGVtS2luZC5NZXRob2Q7XG4gICAgICAgIGNhc2UgbUl0ZW1LaW5kLkZ1bmN0aW9uOiByZXR1cm4gbHMuQ29tcGxldGlvbkl0ZW1LaW5kLkZ1bmN0aW9uO1xuICAgICAgICBjYXNlIG1JdGVtS2luZC5Db25zdHJ1Y3RvcjogcmV0dXJuIGxzLkNvbXBsZXRpb25JdGVtS2luZC5Db25zdHJ1Y3RvcjtcbiAgICAgICAgY2FzZSBtSXRlbUtpbmQuRmllbGQ6IHJldHVybiBscy5Db21wbGV0aW9uSXRlbUtpbmQuRmllbGQ7XG4gICAgICAgIGNhc2UgbUl0ZW1LaW5kLlZhcmlhYmxlOiByZXR1cm4gbHMuQ29tcGxldGlvbkl0ZW1LaW5kLlZhcmlhYmxlO1xuICAgICAgICBjYXNlIG1JdGVtS2luZC5DbGFzczogcmV0dXJuIGxzLkNvbXBsZXRpb25JdGVtS2luZC5DbGFzcztcbiAgICAgICAgY2FzZSBtSXRlbUtpbmQuSW50ZXJmYWNlOiByZXR1cm4gbHMuQ29tcGxldGlvbkl0ZW1LaW5kLkludGVyZmFjZTtcbiAgICAgICAgY2FzZSBtSXRlbUtpbmQuTW9kdWxlOiByZXR1cm4gbHMuQ29tcGxldGlvbkl0ZW1LaW5kLk1vZHVsZTtcbiAgICAgICAgY2FzZSBtSXRlbUtpbmQuUHJvcGVydHk6IHJldHVybiBscy5Db21wbGV0aW9uSXRlbUtpbmQuUHJvcGVydHk7XG4gICAgICAgIGNhc2UgbUl0ZW1LaW5kLlVuaXQ6IHJldHVybiBscy5Db21wbGV0aW9uSXRlbUtpbmQuVW5pdDtcbiAgICAgICAgY2FzZSBtSXRlbUtpbmQuVmFsdWU6IHJldHVybiBscy5Db21wbGV0aW9uSXRlbUtpbmQuVmFsdWU7XG4gICAgICAgIGNhc2UgbUl0ZW1LaW5kLkVudW06IHJldHVybiBscy5Db21wbGV0aW9uSXRlbUtpbmQuRW51bTtcbiAgICAgICAgY2FzZSBtSXRlbUtpbmQuS2V5d29yZDogcmV0dXJuIGxzLkNvbXBsZXRpb25JdGVtS2luZC5LZXl3b3JkO1xuICAgICAgICBjYXNlIG1JdGVtS2luZC5TbmlwcGV0OiByZXR1cm4gbHMuQ29tcGxldGlvbkl0ZW1LaW5kLlNuaXBwZXQ7XG4gICAgICAgIGNhc2UgbUl0ZW1LaW5kLkNvbG9yOiByZXR1cm4gbHMuQ29tcGxldGlvbkl0ZW1LaW5kLkNvbG9yO1xuICAgICAgICBjYXNlIG1JdGVtS2luZC5GaWxlOiByZXR1cm4gbHMuQ29tcGxldGlvbkl0ZW1LaW5kLkZpbGU7XG4gICAgICAgIGNhc2UgbUl0ZW1LaW5kLlJlZmVyZW5jZTogcmV0dXJuIGxzLkNvbXBsZXRpb25JdGVtS2luZC5SZWZlcmVuY2U7XG4gICAgfVxuICAgIHJldHVybiBscy5Db21wbGV0aW9uSXRlbUtpbmQuUHJvcGVydHk7XG59XG5mdW5jdGlvbiB0b1RleHRFZGl0KHRleHRFZGl0KSB7XG4gICAgaWYgKCF0ZXh0RWRpdCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICByYW5nZTogdG9SYW5nZSh0ZXh0RWRpdC5yYW5nZSksXG4gICAgICAgIHRleHQ6IHRleHRFZGl0Lm5ld1RleHRcbiAgICB9O1xufVxuZnVuY3Rpb24gdG9Db21wbGV0aW9uSXRlbShlbnRyeSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGxhYmVsOiBlbnRyeS5sYWJlbCxcbiAgICAgICAgaW5zZXJ0VGV4dDogZW50cnkuaW5zZXJ0VGV4dCxcbiAgICAgICAgc29ydFRleHQ6IGVudHJ5LnNvcnRUZXh0LFxuICAgICAgICBmaWx0ZXJUZXh0OiBlbnRyeS5maWx0ZXJUZXh0LFxuICAgICAgICBkb2N1bWVudGF0aW9uOiBlbnRyeS5kb2N1bWVudGF0aW9uLFxuICAgICAgICBkZXRhaWw6IGVudHJ5LmRldGFpbCxcbiAgICAgICAga2luZDogdG9Db21wbGV0aW9uSXRlbUtpbmQoZW50cnkua2luZCksXG4gICAgICAgIHRleHRFZGl0OiB0b1RleHRFZGl0KGVudHJ5LnRleHRFZGl0KSxcbiAgICAgICAgZGF0YTogZW50cnkuZGF0YVxuICAgIH07XG59XG5mdW5jdGlvbiBmcm9tTWFya2Rvd25TdHJpbmcoZW50cnkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBraW5kOiAodHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJyA/IGxzLk1hcmt1cEtpbmQuUGxhaW5UZXh0IDogbHMuTWFya3VwS2luZC5NYXJrZG93biksXG4gICAgICAgIHZhbHVlOiAodHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJyA/IGVudHJ5IDogZW50cnkudmFsdWUpXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGZyb21Db21wbGV0aW9uSXRlbShlbnRyeSkge1xuICAgIHZhciBpdGVtID0ge1xuICAgICAgICBsYWJlbDogZW50cnkubGFiZWwsXG4gICAgICAgIHNvcnRUZXh0OiBlbnRyeS5zb3J0VGV4dCxcbiAgICAgICAgZmlsdGVyVGV4dDogZW50cnkuZmlsdGVyVGV4dCxcbiAgICAgICAgZG9jdW1lbnRhdGlvbjogZnJvbU1hcmtkb3duU3RyaW5nKGVudHJ5LmRvY3VtZW50YXRpb24pLFxuICAgICAgICBkZXRhaWw6IGVudHJ5LmRldGFpbCxcbiAgICAgICAga2luZDogZnJvbUNvbXBsZXRpb25JdGVtS2luZChlbnRyeS5raW5kKSxcbiAgICAgICAgZGF0YTogZW50cnkuZGF0YVxuICAgIH07XG4gICAgaWYgKHR5cGVvZiBlbnRyeS5pbnNlcnRUZXh0ID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgZW50cnkuaW5zZXJ0VGV4dC52YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaXRlbS5pbnNlcnRUZXh0ID0gZW50cnkuaW5zZXJ0VGV4dC52YWx1ZTtcbiAgICAgICAgaXRlbS5pbnNlcnRUZXh0Rm9ybWF0ID0gbHMuSW5zZXJ0VGV4dEZvcm1hdC5TbmlwcGV0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaXRlbS5pbnNlcnRUZXh0ID0gZW50cnkuaW5zZXJ0VGV4dDtcbiAgICB9XG4gICAgaWYgKGVudHJ5LnJhbmdlKSB7XG4gICAgICAgIGl0ZW0udGV4dEVkaXQgPSBscy5UZXh0RWRpdC5yZXBsYWNlKGZyb21SYW5nZShlbnRyeS5yYW5nZSksIGl0ZW0uaW5zZXJ0VGV4dCk7XG4gICAgfVxuICAgIHJldHVybiBpdGVtO1xufVxudmFyIENvbXBsZXRpb25BZGFwdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbXBsZXRpb25BZGFwdGVyKF93b3JrZXIpIHtcbiAgICAgICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbXBsZXRpb25BZGFwdGVyLnByb3RvdHlwZSwgXCJ0cmlnZ2VyQ2hhcmFjdGVyc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFsnICcsICc6J107XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIENvbXBsZXRpb25BZGFwdGVyLnByb3RvdHlwZS5wcm92aWRlQ29tcGxldGlvbkl0ZW1zID0gZnVuY3Rpb24gKG1vZGVsLCBwb3NpdGlvbiwgdG9rZW4pIHtcbiAgICAgICAgdmFyIHdvcmRJbmZvID0gbW9kZWwuZ2V0V29yZFVudGlsUG9zaXRpb24ocG9zaXRpb24pO1xuICAgICAgICB2YXIgcmVzb3VyY2UgPSBtb2RlbC51cmk7XG4gICAgICAgIHJldHVybiB3aXJlQ2FuY2VsbGF0aW9uVG9rZW4odG9rZW4sIHRoaXMuX3dvcmtlcihyZXNvdXJjZSkudGhlbihmdW5jdGlvbiAod29ya2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gd29ya2VyLmRvQ29tcGxldGUocmVzb3VyY2UudG9TdHJpbmcoKSwgZnJvbVBvc2l0aW9uKHBvc2l0aW9uKSk7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgICAgIGlmICghaW5mbykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpdGVtcyA9IGluZm8uaXRlbXMubWFwKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogZW50cnkubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIGluc2VydFRleHQ6IGVudHJ5Lmluc2VydFRleHQsXG4gICAgICAgICAgICAgICAgICAgIHNvcnRUZXh0OiBlbnRyeS5zb3J0VGV4dCxcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyVGV4dDogZW50cnkuZmlsdGVyVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRhdGlvbjogZW50cnkuZG9jdW1lbnRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBlbnRyeS5kZXRhaWwsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IHRvQ29tcGxldGlvbkl0ZW1LaW5kKGVudHJ5LmtpbmQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LnRleHRFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ucmFuZ2UgPSB0b1JhbmdlKGVudHJ5LnRleHRFZGl0LnJhbmdlKTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5pbnNlcnRUZXh0ID0gZW50cnkudGV4dEVkaXQubmV3VGV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5Lmluc2VydFRleHRGb3JtYXQgPT09IGxzLkluc2VydFRleHRGb3JtYXQuU25pcHBldCkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmluc2VydFRleHQgPSB7IHZhbHVlOiBpdGVtLmluc2VydFRleHQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaXNJbmNvbXBsZXRlOiBpbmZvLmlzSW5jb21wbGV0ZSxcbiAgICAgICAgICAgICAgICBpdGVtczogaXRlbXNcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIHJldHVybiBDb21wbGV0aW9uQWRhcHRlcjtcbn0oKSk7XG5leHBvcnQgeyBDb21wbGV0aW9uQWRhcHRlciB9O1xuZnVuY3Rpb24gaXNNYXJrdXBDb250ZW50KHRoaW5nKSB7XG4gICAgcmV0dXJuIHRoaW5nICYmIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHRoaW5nLmtpbmQgPT09ICdzdHJpbmcnO1xufVxuZnVuY3Rpb24gdG9NYXJrZG93blN0cmluZyhlbnRyeSkge1xuICAgIGlmICh0eXBlb2YgZW50cnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogZW50cnlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlzTWFya3VwQ29udGVudChlbnRyeSkpIHtcbiAgICAgICAgaWYgKGVudHJ5LmtpbmQgPT09ICdwbGFpbnRleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBlbnRyeS52YWx1ZS5yZXBsYWNlKC9bXFxcXGAqX3t9W1xcXSgpIytcXC0uIV0vZywgJ1xcXFwkJicpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogZW50cnkudmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdmFsdWU6ICdgYGAnICsgZW50cnkubGFuZ3VhZ2UgKyAnXFxuJyArIGVudHJ5LnZhbHVlICsgJ1xcbmBgYFxcbicgfTtcbn1cbmZ1bmN0aW9uIHRvTWFya2VkU3RyaW5nQXJyYXkoY29udGVudHMpIHtcbiAgICBpZiAoIWNvbnRlbnRzKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGNvbnRlbnRzKSkge1xuICAgICAgICByZXR1cm4gY29udGVudHMubWFwKHRvTWFya2Rvd25TdHJpbmcpO1xuICAgIH1cbiAgICByZXR1cm4gW3RvTWFya2Rvd25TdHJpbmcoY29udGVudHMpXTtcbn1cbi8vIC0tLSBob3ZlciAtLS0tLS1cbnZhciBIb3ZlckFkYXB0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSG92ZXJBZGFwdGVyKF93b3JrZXIpIHtcbiAgICAgICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcbiAgICB9XG4gICAgSG92ZXJBZGFwdGVyLnByb3RvdHlwZS5wcm92aWRlSG92ZXIgPSBmdW5jdGlvbiAobW9kZWwsIHBvc2l0aW9uLCB0b2tlbikge1xuICAgICAgICB2YXIgcmVzb3VyY2UgPSBtb2RlbC51cmk7XG4gICAgICAgIHJldHVybiB3aXJlQ2FuY2VsbGF0aW9uVG9rZW4odG9rZW4sIHRoaXMuX3dvcmtlcihyZXNvdXJjZSkudGhlbihmdW5jdGlvbiAod29ya2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gd29ya2VyLmRvSG92ZXIocmVzb3VyY2UudG9TdHJpbmcoKSwgZnJvbVBvc2l0aW9uKHBvc2l0aW9uKSk7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgICAgIGlmICghaW5mbykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IHRvUmFuZ2UoaW5mby5yYW5nZSksXG4gICAgICAgICAgICAgICAgY29udGVudHM6IHRvTWFya2VkU3RyaW5nQXJyYXkoaW5mby5jb250ZW50cylcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIHJldHVybiBIb3ZlckFkYXB0ZXI7XG59KCkpO1xuZXhwb3J0IHsgSG92ZXJBZGFwdGVyIH07XG4vLyAtLS0gZGVmaW5pdGlvbiAtLS0tLS1cbmZ1bmN0aW9uIHRvTG9jYXRpb24obG9jYXRpb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB1cmk6IFVyaS5wYXJzZShsb2NhdGlvbi51cmkpLFxuICAgICAgICByYW5nZTogdG9SYW5nZShsb2NhdGlvbi5yYW5nZSlcbiAgICB9O1xufVxuLy8gLS0tIGRvY3VtZW50IHN5bWJvbHMgLS0tLS0tXG5mdW5jdGlvbiB0b1N5bWJvbEtpbmQoa2luZCkge1xuICAgIHZhciBtS2luZCA9IG1vbmFjby5sYW5ndWFnZXMuU3ltYm9sS2luZDtcbiAgICBzd2l0Y2ggKGtpbmQpIHtcbiAgICAgICAgY2FzZSBscy5TeW1ib2xLaW5kLkZpbGU6IHJldHVybiBtS2luZC5BcnJheTtcbiAgICAgICAgY2FzZSBscy5TeW1ib2xLaW5kLk1vZHVsZTogcmV0dXJuIG1LaW5kLk1vZHVsZTtcbiAgICAgICAgY2FzZSBscy5TeW1ib2xLaW5kLk5hbWVzcGFjZTogcmV0dXJuIG1LaW5kLk5hbWVzcGFjZTtcbiAgICAgICAgY2FzZSBscy5TeW1ib2xLaW5kLlBhY2thZ2U6IHJldHVybiBtS2luZC5QYWNrYWdlO1xuICAgICAgICBjYXNlIGxzLlN5bWJvbEtpbmQuQ2xhc3M6IHJldHVybiBtS2luZC5DbGFzcztcbiAgICAgICAgY2FzZSBscy5TeW1ib2xLaW5kLk1ldGhvZDogcmV0dXJuIG1LaW5kLk1ldGhvZDtcbiAgICAgICAgY2FzZSBscy5TeW1ib2xLaW5kLlByb3BlcnR5OiByZXR1cm4gbUtpbmQuUHJvcGVydHk7XG4gICAgICAgIGNhc2UgbHMuU3ltYm9sS2luZC5GaWVsZDogcmV0dXJuIG1LaW5kLkZpZWxkO1xuICAgICAgICBjYXNlIGxzLlN5bWJvbEtpbmQuQ29uc3RydWN0b3I6IHJldHVybiBtS2luZC5Db25zdHJ1Y3RvcjtcbiAgICAgICAgY2FzZSBscy5TeW1ib2xLaW5kLkVudW06IHJldHVybiBtS2luZC5FbnVtO1xuICAgICAgICBjYXNlIGxzLlN5bWJvbEtpbmQuSW50ZXJmYWNlOiByZXR1cm4gbUtpbmQuSW50ZXJmYWNlO1xuICAgICAgICBjYXNlIGxzLlN5bWJvbEtpbmQuRnVuY3Rpb246IHJldHVybiBtS2luZC5GdW5jdGlvbjtcbiAgICAgICAgY2FzZSBscy5TeW1ib2xLaW5kLlZhcmlhYmxlOiByZXR1cm4gbUtpbmQuVmFyaWFibGU7XG4gICAgICAgIGNhc2UgbHMuU3ltYm9sS2luZC5Db25zdGFudDogcmV0dXJuIG1LaW5kLkNvbnN0YW50O1xuICAgICAgICBjYXNlIGxzLlN5bWJvbEtpbmQuU3RyaW5nOiByZXR1cm4gbUtpbmQuU3RyaW5nO1xuICAgICAgICBjYXNlIGxzLlN5bWJvbEtpbmQuTnVtYmVyOiByZXR1cm4gbUtpbmQuTnVtYmVyO1xuICAgICAgICBjYXNlIGxzLlN5bWJvbEtpbmQuQm9vbGVhbjogcmV0dXJuIG1LaW5kLkJvb2xlYW47XG4gICAgICAgIGNhc2UgbHMuU3ltYm9sS2luZC5BcnJheTogcmV0dXJuIG1LaW5kLkFycmF5O1xuICAgIH1cbiAgICByZXR1cm4gbUtpbmQuRnVuY3Rpb247XG59XG52YXIgRG9jdW1lbnRTeW1ib2xBZGFwdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERvY3VtZW50U3ltYm9sQWRhcHRlcihfd29ya2VyKSB7XG4gICAgICAgIHRoaXMuX3dvcmtlciA9IF93b3JrZXI7XG4gICAgfVxuICAgIERvY3VtZW50U3ltYm9sQWRhcHRlci5wcm90b3R5cGUucHJvdmlkZURvY3VtZW50U3ltYm9scyA9IGZ1bmN0aW9uIChtb2RlbCwgdG9rZW4pIHtcbiAgICAgICAgdmFyIHJlc291cmNlID0gbW9kZWwudXJpO1xuICAgICAgICByZXR1cm4gd2lyZUNhbmNlbGxhdGlvblRva2VuKHRva2VuLCB0aGlzLl93b3JrZXIocmVzb3VyY2UpLnRoZW4oZnVuY3Rpb24gKHdvcmtlcikgeyByZXR1cm4gd29ya2VyLmZpbmREb2N1bWVudFN5bWJvbHMocmVzb3VyY2UudG9TdHJpbmcoKSk7IH0pLnRoZW4oZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoIWl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgY29udGFpbmVyTmFtZTogaXRlbS5jb250YWluZXJOYW1lLFxuICAgICAgICAgICAgICAgIGtpbmQ6IHRvU3ltYm9sS2luZChpdGVtLmtpbmQpLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiB0b0xvY2F0aW9uKGl0ZW0ubG9jYXRpb24pXG4gICAgICAgICAgICB9KTsgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIHJldHVybiBEb2N1bWVudFN5bWJvbEFkYXB0ZXI7XG59KCkpO1xuZXhwb3J0IHsgRG9jdW1lbnRTeW1ib2xBZGFwdGVyIH07XG5mdW5jdGlvbiBmcm9tRm9ybWF0dGluZ09wdGlvbnMob3B0aW9ucykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRhYlNpemU6IG9wdGlvbnMudGFiU2l6ZSxcbiAgICAgICAgaW5zZXJ0U3BhY2VzOiBvcHRpb25zLmluc2VydFNwYWNlc1xuICAgIH07XG59XG52YXIgRG9jdW1lbnRGb3JtYXR0aW5nRWRpdFByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERvY3VtZW50Rm9ybWF0dGluZ0VkaXRQcm92aWRlcihfd29ya2VyKSB7XG4gICAgICAgIHRoaXMuX3dvcmtlciA9IF93b3JrZXI7XG4gICAgfVxuICAgIERvY3VtZW50Rm9ybWF0dGluZ0VkaXRQcm92aWRlci5wcm90b3R5cGUucHJvdmlkZURvY3VtZW50Rm9ybWF0dGluZ0VkaXRzID0gZnVuY3Rpb24gKG1vZGVsLCBvcHRpb25zLCB0b2tlbikge1xuICAgICAgICB2YXIgcmVzb3VyY2UgPSBtb2RlbC51cmk7XG4gICAgICAgIHJldHVybiB3aXJlQ2FuY2VsbGF0aW9uVG9rZW4odG9rZW4sIHRoaXMuX3dvcmtlcihyZXNvdXJjZSkudGhlbihmdW5jdGlvbiAod29ya2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gd29ya2VyLmZvcm1hdChyZXNvdXJjZS50b1N0cmluZygpLCBudWxsLCBmcm9tRm9ybWF0dGluZ09wdGlvbnMob3B0aW9ucykpLnRoZW4oZnVuY3Rpb24gKGVkaXRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlZGl0cyB8fCBlZGl0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZWRpdHMubWFwKHRvVGV4dEVkaXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIHJldHVybiBEb2N1bWVudEZvcm1hdHRpbmdFZGl0UHJvdmlkZXI7XG59KCkpO1xuZXhwb3J0IHsgRG9jdW1lbnRGb3JtYXR0aW5nRWRpdFByb3ZpZGVyIH07XG52YXIgRG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdFZGl0UHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdFZGl0UHJvdmlkZXIoX3dvcmtlcikge1xuICAgICAgICB0aGlzLl93b3JrZXIgPSBfd29ya2VyO1xuICAgIH1cbiAgICBEb2N1bWVudFJhbmdlRm9ybWF0dGluZ0VkaXRQcm92aWRlci5wcm90b3R5cGUucHJvdmlkZURvY3VtZW50UmFuZ2VGb3JtYXR0aW5nRWRpdHMgPSBmdW5jdGlvbiAobW9kZWwsIHJhbmdlLCBvcHRpb25zLCB0b2tlbikge1xuICAgICAgICB2YXIgcmVzb3VyY2UgPSBtb2RlbC51cmk7XG4gICAgICAgIHJldHVybiB3aXJlQ2FuY2VsbGF0aW9uVG9rZW4odG9rZW4sIHRoaXMuX3dvcmtlcihyZXNvdXJjZSkudGhlbihmdW5jdGlvbiAod29ya2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gd29ya2VyLmZvcm1hdChyZXNvdXJjZS50b1N0cmluZygpLCBmcm9tUmFuZ2UocmFuZ2UpLCBmcm9tRm9ybWF0dGluZ09wdGlvbnMob3B0aW9ucykpLnRoZW4oZnVuY3Rpb24gKGVkaXRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlZGl0cyB8fCBlZGl0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZWRpdHMubWFwKHRvVGV4dEVkaXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIHJldHVybiBEb2N1bWVudFJhbmdlRm9ybWF0dGluZ0VkaXRQcm92aWRlcjtcbn0oKSk7XG5leHBvcnQgeyBEb2N1bWVudFJhbmdlRm9ybWF0dGluZ0VkaXRQcm92aWRlciB9O1xudmFyIERvY3VtZW50Q29sb3JBZGFwdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERvY3VtZW50Q29sb3JBZGFwdGVyKF93b3JrZXIpIHtcbiAgICAgICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcbiAgICB9XG4gICAgRG9jdW1lbnRDb2xvckFkYXB0ZXIucHJvdG90eXBlLnByb3ZpZGVEb2N1bWVudENvbG9ycyA9IGZ1bmN0aW9uIChtb2RlbCwgdG9rZW4pIHtcbiAgICAgICAgdmFyIHJlc291cmNlID0gbW9kZWwudXJpO1xuICAgICAgICByZXR1cm4gd2lyZUNhbmNlbGxhdGlvblRva2VuKHRva2VuLCB0aGlzLl93b3JrZXIocmVzb3VyY2UpLnRoZW4oZnVuY3Rpb24gKHdvcmtlcikgeyByZXR1cm4gd29ya2VyLmZpbmREb2N1bWVudENvbG9ycyhyZXNvdXJjZS50b1N0cmluZygpKTsgfSkudGhlbihmdW5jdGlvbiAoaW5mb3MpIHtcbiAgICAgICAgICAgIGlmICghaW5mb3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5mb3MubWFwKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiAoe1xuICAgICAgICAgICAgICAgIGNvbG9yOiBpdGVtLmNvbG9yLFxuICAgICAgICAgICAgICAgIHJhbmdlOiB0b1JhbmdlKGl0ZW0ucmFuZ2UpXG4gICAgICAgICAgICB9KTsgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIERvY3VtZW50Q29sb3JBZGFwdGVyLnByb3RvdHlwZS5wcm92aWRlQ29sb3JQcmVzZW50YXRpb25zID0gZnVuY3Rpb24gKG1vZGVsLCBpbmZvLCB0b2tlbikge1xuICAgICAgICB2YXIgcmVzb3VyY2UgPSBtb2RlbC51cmk7XG4gICAgICAgIHJldHVybiB3aXJlQ2FuY2VsbGF0aW9uVG9rZW4odG9rZW4sIHRoaXMuX3dvcmtlcihyZXNvdXJjZSkudGhlbihmdW5jdGlvbiAod29ya2VyKSB7IHJldHVybiB3b3JrZXIuZ2V0Q29sb3JQcmVzZW50YXRpb25zKHJlc291cmNlLnRvU3RyaW5nKCksIGluZm8uY29sb3IsIGZyb21SYW5nZShpbmZvLnJhbmdlKSk7IH0pLnRoZW4oZnVuY3Rpb24gKHByZXNlbnRhdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghcHJlc2VudGF0aW9ucykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwcmVzZW50YXRpb25zLm1hcChmdW5jdGlvbiAocHJlc2VudGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBwcmVzZW50YXRpb24ubGFiZWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocHJlc2VudGF0aW9uLnRleHRFZGl0KSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udGV4dEVkaXQgPSB0b1RleHRFZGl0KHByZXNlbnRhdGlvbi50ZXh0RWRpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwcmVzZW50YXRpb24uYWRkaXRpb25hbFRleHRFZGl0cykge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmFkZGl0aW9uYWxUZXh0RWRpdHMgPSBwcmVzZW50YXRpb24uYWRkaXRpb25hbFRleHRFZGl0cy5tYXAodG9UZXh0RWRpdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIHJldHVybiBEb2N1bWVudENvbG9yQWRhcHRlcjtcbn0oKSk7XG5leHBvcnQgeyBEb2N1bWVudENvbG9yQWRhcHRlciB9O1xuLyoqXG4gKiBIb29rIGEgY2FuY2VsbGF0aW9uIHRva2VuIHRvIGEgV2luSlMgUHJvbWlzZVxuICovXG5mdW5jdGlvbiB3aXJlQ2FuY2VsbGF0aW9uVG9rZW4odG9rZW4sIHByb21pc2UpIHtcbiAgICBpZiAocHJvbWlzZS5jYW5jZWwpIHtcbiAgICAgICAgdG9rZW4ub25DYW5jZWxsYXRpb25SZXF1ZXN0ZWQoZnVuY3Rpb24gKCkgeyByZXR1cm4gcHJvbWlzZS5jYW5jZWwoKTsgfSk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlO1xufVxuIiwiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4ndXNlIHN0cmljdCc7XG5pbXBvcnQgKiBhcyBqc29uIGZyb20gJy4vX2RlcHMvanNvbmMtcGFyc2VyL21haW4uanMnO1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRva2VuaXphdGlvblN1cHBvcnQoc3VwcG9ydENvbW1lbnRzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgSlNPTlN0YXRlKG51bGwsIG51bGwsIGZhbHNlKTsgfSxcbiAgICAgICAgdG9rZW5pemU6IGZ1bmN0aW9uIChsaW5lLCBzdGF0ZSwgb2Zmc2V0RGVsdGEsIHN0b3BBdE9mZnNldCkgeyByZXR1cm4gdG9rZW5pemUoc3VwcG9ydENvbW1lbnRzLCBsaW5lLCBzdGF0ZSwgb2Zmc2V0RGVsdGEsIHN0b3BBdE9mZnNldCk7IH1cbiAgICB9O1xufVxuZXhwb3J0IHZhciBUT0tFTl9ERUxJTV9PQkpFQ1QgPSAnZGVsaW1pdGVyLmJyYWNrZXQuanNvbic7XG5leHBvcnQgdmFyIFRPS0VOX0RFTElNX0FSUkFZID0gJ2RlbGltaXRlci5hcnJheS5qc29uJztcbmV4cG9ydCB2YXIgVE9LRU5fREVMSU1fQ09MT04gPSAnZGVsaW1pdGVyLmNvbG9uLmpzb24nO1xuZXhwb3J0IHZhciBUT0tFTl9ERUxJTV9DT01NQSA9ICdkZWxpbWl0ZXIuY29tbWEuanNvbic7XG5leHBvcnQgdmFyIFRPS0VOX1ZBTFVFX0JPT0xFQU4gPSAna2V5d29yZC5qc29uJztcbmV4cG9ydCB2YXIgVE9LRU5fVkFMVUVfTlVMTCA9ICdrZXl3b3JkLmpzb24nO1xuZXhwb3J0IHZhciBUT0tFTl9WQUxVRV9TVFJJTkcgPSAnc3RyaW5nLnZhbHVlLmpzb24nO1xuZXhwb3J0IHZhciBUT0tFTl9WQUxVRV9OVU1CRVIgPSAnbnVtYmVyLmpzb24nO1xuZXhwb3J0IHZhciBUT0tFTl9QUk9QRVJUWV9OQU1FID0gJ3N0cmluZy5rZXkuanNvbic7XG5leHBvcnQgdmFyIFRPS0VOX0NPTU1FTlRfQkxPQ0sgPSAnY29tbWVudC5ibG9jay5qc29uJztcbmV4cG9ydCB2YXIgVE9LRU5fQ09NTUVOVF9MSU5FID0gJ2NvbW1lbnQubGluZS5qc29uJztcbnZhciBKU09OU3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSlNPTlN0YXRlKHN0YXRlLCBzY2FuRXJyb3IsIGxhc3RXYXNDb2xvbikge1xuICAgICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB0aGlzLnNjYW5FcnJvciA9IHNjYW5FcnJvcjtcbiAgICAgICAgdGhpcy5sYXN0V2FzQ29sb24gPSBsYXN0V2FzQ29sb247XG4gICAgfVxuICAgIEpTT05TdGF0ZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSlNPTlN0YXRlKHRoaXMuX3N0YXRlLCB0aGlzLnNjYW5FcnJvciwgdGhpcy5sYXN0V2FzQ29sb24pO1xuICAgIH07XG4gICAgSlNPTlN0YXRlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICAgICAgaWYgKG90aGVyID09PSB0aGlzKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW90aGVyIHx8ICEob3RoZXIgaW5zdGFuY2VvZiBKU09OU3RhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2NhbkVycm9yID09PSBvdGhlci5zY2FuRXJyb3IgJiZcbiAgICAgICAgICAgIHRoaXMubGFzdFdhc0NvbG9uID09PSBvdGhlci5sYXN0V2FzQ29sb247XG4gICAgfTtcbiAgICBKU09OU3RhdGUucHJvdG90eXBlLmdldFN0YXRlRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICAgIH07XG4gICAgSlNPTlN0YXRlLnByb3RvdHlwZS5zZXRTdGF0ZURhdGEgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICB9O1xuICAgIHJldHVybiBKU09OU3RhdGU7XG59KCkpO1xuZnVuY3Rpb24gdG9rZW5pemUoY29tbWVudHMsIGxpbmUsIHN0YXRlLCBvZmZzZXREZWx0YSwgc3RvcEF0T2Zmc2V0KSB7XG4gICAgaWYgKG9mZnNldERlbHRhID09PSB2b2lkIDApIHsgb2Zmc2V0RGVsdGEgPSAwOyB9XG4gICAgLy8gaGFuZGxlIG11bHRpbGluZSBzdHJpbmdzIGFuZCBibG9jayBjb21tZW50c1xuICAgIHZhciBudW1iZXJPZkluc2VydGVkQ2hhcmFjdGVycyA9IDAsIGFkanVzdE9mZnNldCA9IGZhbHNlO1xuICAgIHN3aXRjaCAoc3RhdGUuc2NhbkVycm9yKSB7XG4gICAgICAgIGNhc2UgMiAvKiBVbmV4cGVjdGVkRW5kT2ZTdHJpbmcgKi86XG4gICAgICAgICAgICBsaW5lID0gJ1wiJyArIGxpbmU7XG4gICAgICAgICAgICBudW1iZXJPZkluc2VydGVkQ2hhcmFjdGVycyA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxIC8qIFVuZXhwZWN0ZWRFbmRPZkNvbW1lbnQgKi86XG4gICAgICAgICAgICBsaW5lID0gJy8qJyArIGxpbmU7XG4gICAgICAgICAgICBudW1iZXJPZkluc2VydGVkQ2hhcmFjdGVycyA9IDI7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdmFyIHNjYW5uZXIgPSBqc29uLmNyZWF0ZVNjYW5uZXIobGluZSksIGtpbmQsIHJldCwgbGFzdFdhc0NvbG9uID0gc3RhdGUubGFzdFdhc0NvbG9uO1xuICAgIHJldCA9IHtcbiAgICAgICAgdG9rZW5zOiBbXSxcbiAgICAgICAgZW5kU3RhdGU6IHN0YXRlLmNsb25lKClcbiAgICB9O1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSBvZmZzZXREZWx0YSArIHNjYW5uZXIuZ2V0UG9zaXRpb24oKSwgdHlwZSA9ICcnO1xuICAgICAgICBraW5kID0gc2Nhbm5lci5zY2FuKCk7XG4gICAgICAgIGlmIChraW5kID09PSAxNyAvKiBFT0YgKi8pIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIHNjYW5uZXIgaGFzIGFkdmFuY2VkXG4gICAgICAgIGlmIChvZmZzZXQgPT09IG9mZnNldERlbHRhICsgc2Nhbm5lci5nZXRQb3NpdGlvbigpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NjYW5uZXIgZGlkIG5vdCBhZHZhbmNlLCBuZXh0IDMgY2hhcmFjdGVycyBhcmU6ICcgKyBsaW5lLnN1YnN0cihzY2FubmVyLmdldFBvc2l0aW9uKCksIDMpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJbiBjYXNlIHdlIGluc2VydGVkIC8qIG9yIFwiIGNoYXJhY3Rlciwgd2UgbmVlZCB0b1xuICAgICAgICAvLyBhZGp1c3QgdGhlIG9mZnNldCBvZiBhbGwgdG9rZW5zIChleGNlcHQgdGhlIGZpcnN0KVxuICAgICAgICBpZiAoYWRqdXN0T2Zmc2V0KSB7XG4gICAgICAgICAgICBvZmZzZXQgLT0gbnVtYmVyT2ZJbnNlcnRlZENoYXJhY3RlcnM7XG4gICAgICAgIH1cbiAgICAgICAgYWRqdXN0T2Zmc2V0ID0gbnVtYmVyT2ZJbnNlcnRlZENoYXJhY3RlcnMgPiAwO1xuICAgICAgICAvLyBicmFja2V0cyBhbmQgdHlwZVxuICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgMSAvKiBPcGVuQnJhY2VUb2tlbiAqLzpcbiAgICAgICAgICAgICAgICB0eXBlID0gVE9LRU5fREVMSU1fT0JKRUNUO1xuICAgICAgICAgICAgICAgIGxhc3RXYXNDb2xvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyIC8qIENsb3NlQnJhY2VUb2tlbiAqLzpcbiAgICAgICAgICAgICAgICB0eXBlID0gVE9LRU5fREVMSU1fT0JKRUNUO1xuICAgICAgICAgICAgICAgIGxhc3RXYXNDb2xvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzIC8qIE9wZW5CcmFja2V0VG9rZW4gKi86XG4gICAgICAgICAgICAgICAgdHlwZSA9IFRPS0VOX0RFTElNX0FSUkFZO1xuICAgICAgICAgICAgICAgIGxhc3RXYXNDb2xvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0IC8qIENsb3NlQnJhY2tldFRva2VuICovOlxuICAgICAgICAgICAgICAgIHR5cGUgPSBUT0tFTl9ERUxJTV9BUlJBWTtcbiAgICAgICAgICAgICAgICBsYXN0V2FzQ29sb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNiAvKiBDb2xvblRva2VuICovOlxuICAgICAgICAgICAgICAgIHR5cGUgPSBUT0tFTl9ERUxJTV9DT0xPTjtcbiAgICAgICAgICAgICAgICBsYXN0V2FzQ29sb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA1IC8qIENvbW1hVG9rZW4gKi86XG4gICAgICAgICAgICAgICAgdHlwZSA9IFRPS0VOX0RFTElNX0NPTU1BO1xuICAgICAgICAgICAgICAgIGxhc3RXYXNDb2xvbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA4IC8qIFRydWVLZXl3b3JkICovOlxuICAgICAgICAgICAgY2FzZSA5IC8qIEZhbHNlS2V5d29yZCAqLzpcbiAgICAgICAgICAgICAgICB0eXBlID0gVE9LRU5fVkFMVUVfQk9PTEVBTjtcbiAgICAgICAgICAgICAgICBsYXN0V2FzQ29sb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNyAvKiBOdWxsS2V5d29yZCAqLzpcbiAgICAgICAgICAgICAgICB0eXBlID0gVE9LRU5fVkFMVUVfTlVMTDtcbiAgICAgICAgICAgICAgICBsYXN0V2FzQ29sb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTAgLyogU3RyaW5nTGl0ZXJhbCAqLzpcbiAgICAgICAgICAgICAgICB0eXBlID0gbGFzdFdhc0NvbG9uID8gVE9LRU5fVkFMVUVfU1RSSU5HIDogVE9LRU5fUFJPUEVSVFlfTkFNRTtcbiAgICAgICAgICAgICAgICBsYXN0V2FzQ29sb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTEgLyogTnVtZXJpY0xpdGVyYWwgKi86XG4gICAgICAgICAgICAgICAgdHlwZSA9IFRPS0VOX1ZBTFVFX05VTUJFUjtcbiAgICAgICAgICAgICAgICBsYXN0V2FzQ29sb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBjb21tZW50cywgaWZmIGVuYWJsZWRcbiAgICAgICAgaWYgKGNvbW1lbnRzKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGtpbmQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDEyIC8qIExpbmVDb21tZW50VHJpdmlhICovOlxuICAgICAgICAgICAgICAgICAgICB0eXBlID0gVE9LRU5fQ09NTUVOVF9MSU5FO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDEzIC8qIEJsb2NrQ29tbWVudFRyaXZpYSAqLzpcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IFRPS0VOX0NPTU1FTlRfQkxPQ0s7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldC5lbmRTdGF0ZSA9IG5ldyBKU09OU3RhdGUoc3RhdGUuZ2V0U3RhdGVEYXRhKCksIHNjYW5uZXIuZ2V0VG9rZW5FcnJvcigpLCBsYXN0V2FzQ29sb24pO1xuICAgICAgICByZXQudG9rZW5zLnB1c2goe1xuICAgICAgICAgICAgc3RhcnRJbmRleDogb2Zmc2V0LFxuICAgICAgICAgICAgc2NvcGVzOiB0eXBlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufVxuIiwiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4ndXNlIHN0cmljdCc7XG5pbXBvcnQgeyBXb3JrZXJNYW5hZ2VyIH0gZnJvbSAnLi93b3JrZXJNYW5hZ2VyLmpzJztcbmltcG9ydCAqIGFzIGxhbmd1YWdlRmVhdHVyZXMgZnJvbSAnLi9sYW5ndWFnZUZlYXR1cmVzLmpzJztcbmltcG9ydCB7IGNyZWF0ZVRva2VuaXphdGlvblN1cHBvcnQgfSBmcm9tICcuL3Rva2VuaXphdGlvbi5qcyc7XG5leHBvcnQgZnVuY3Rpb24gc2V0dXBNb2RlKGRlZmF1bHRzKSB7XG4gICAgdmFyIGRpc3Bvc2FibGVzID0gW107XG4gICAgdmFyIGNsaWVudCA9IG5ldyBXb3JrZXJNYW5hZ2VyKGRlZmF1bHRzKTtcbiAgICBkaXNwb3NhYmxlcy5wdXNoKGNsaWVudCk7XG4gICAgdmFyIHdvcmtlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHVyaXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHVyaXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xpZW50LmdldExhbmd1YWdlU2VydmljZVdvcmtlci5hcHBseShjbGllbnQsIHVyaXMpO1xuICAgIH07XG4gICAgdmFyIGxhbmd1YWdlSWQgPSBkZWZhdWx0cy5sYW5ndWFnZUlkO1xuICAgIGRpc3Bvc2FibGVzLnB1c2gobW9uYWNvLmxhbmd1YWdlcy5yZWdpc3RlckNvbXBsZXRpb25JdGVtUHJvdmlkZXIobGFuZ3VhZ2VJZCwgbmV3IGxhbmd1YWdlRmVhdHVyZXMuQ29tcGxldGlvbkFkYXB0ZXIod29ya2VyKSkpO1xuICAgIGRpc3Bvc2FibGVzLnB1c2gobW9uYWNvLmxhbmd1YWdlcy5yZWdpc3RlckhvdmVyUHJvdmlkZXIobGFuZ3VhZ2VJZCwgbmV3IGxhbmd1YWdlRmVhdHVyZXMuSG92ZXJBZGFwdGVyKHdvcmtlcikpKTtcbiAgICBkaXNwb3NhYmxlcy5wdXNoKG1vbmFjby5sYW5ndWFnZXMucmVnaXN0ZXJEb2N1bWVudFN5bWJvbFByb3ZpZGVyKGxhbmd1YWdlSWQsIG5ldyBsYW5ndWFnZUZlYXR1cmVzLkRvY3VtZW50U3ltYm9sQWRhcHRlcih3b3JrZXIpKSk7XG4gICAgZGlzcG9zYWJsZXMucHVzaChtb25hY28ubGFuZ3VhZ2VzLnJlZ2lzdGVyRG9jdW1lbnRGb3JtYXR0aW5nRWRpdFByb3ZpZGVyKGxhbmd1YWdlSWQsIG5ldyBsYW5ndWFnZUZlYXR1cmVzLkRvY3VtZW50Rm9ybWF0dGluZ0VkaXRQcm92aWRlcih3b3JrZXIpKSk7XG4gICAgZGlzcG9zYWJsZXMucHVzaChtb25hY28ubGFuZ3VhZ2VzLnJlZ2lzdGVyRG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdFZGl0UHJvdmlkZXIobGFuZ3VhZ2VJZCwgbmV3IGxhbmd1YWdlRmVhdHVyZXMuRG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdFZGl0UHJvdmlkZXIod29ya2VyKSkpO1xuICAgIGRpc3Bvc2FibGVzLnB1c2gobmV3IGxhbmd1YWdlRmVhdHVyZXMuRGlhZ25vc3RpY3NBZGFwdGVyKGxhbmd1YWdlSWQsIHdvcmtlciwgZGVmYXVsdHMpKTtcbiAgICBkaXNwb3NhYmxlcy5wdXNoKG1vbmFjby5sYW5ndWFnZXMuc2V0VG9rZW5zUHJvdmlkZXIobGFuZ3VhZ2VJZCwgY3JlYXRlVG9rZW5pemF0aW9uU3VwcG9ydCh0cnVlKSkpO1xuICAgIGRpc3Bvc2FibGVzLnB1c2gobW9uYWNvLmxhbmd1YWdlcy5zZXRMYW5ndWFnZUNvbmZpZ3VyYXRpb24obGFuZ3VhZ2VJZCwgcmljaEVkaXRDb25maWd1cmF0aW9uKSk7XG4gICAgZGlzcG9zYWJsZXMucHVzaChtb25hY28ubGFuZ3VhZ2VzLnJlZ2lzdGVyQ29sb3JQcm92aWRlcihsYW5ndWFnZUlkLCBuZXcgbGFuZ3VhZ2VGZWF0dXJlcy5Eb2N1bWVudENvbG9yQWRhcHRlcih3b3JrZXIpKSk7XG59XG52YXIgcmljaEVkaXRDb25maWd1cmF0aW9uID0ge1xuICAgIHdvcmRQYXR0ZXJuOiAvKC0/XFxkKlxcLlxcZFxcdyopfChbXlxcW1xce1xcXVxcfVxcOlxcXCJcXCxcXHNdKykvZyxcbiAgICBjb21tZW50czoge1xuICAgICAgICBsaW5lQ29tbWVudDogJy8vJyxcbiAgICAgICAgYmxvY2tDb21tZW50OiBbJy8qJywgJyovJ11cbiAgICB9LFxuICAgIGJyYWNrZXRzOiBbXG4gICAgICAgIFsneycsICd9J10sXG4gICAgICAgIFsnWycsICddJ11cbiAgICBdLFxuICAgIGF1dG9DbG9zaW5nUGFpcnM6IFtcbiAgICAgICAgeyBvcGVuOiAneycsIGNsb3NlOiAnfScsIG5vdEluOiBbJ3N0cmluZyddIH0sXG4gICAgICAgIHsgb3BlbjogJ1snLCBjbG9zZTogJ10nLCBub3RJbjogWydzdHJpbmcnXSB9LFxuICAgICAgICB7IG9wZW46ICdcIicsIGNsb3NlOiAnXCInLCBub3RJbjogWydzdHJpbmcnXSB9XG4gICAgXVxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=